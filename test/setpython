#!/bin/sh
#
# setpython - create a local link from 'python' to a specified version
#
# This script is used to to redirect the 'python' in reposurgeon's
# shebang line to a specified version when running regression tests.

if [ -z "$1" ]
then
	if [ -e python ]
	then
		readlink python
	else
		command -v python
	fi
elif [ $1 = "python" ]
then
	rm -f ./python
	echo "python -> `command -v python`"
elif [ $1 = python2 -o $1 = python3 ]
then
	set -- `command -v $1`
	case $1 in
		*/bin/*) ln -sf $1 ./python; echo "python -> $1";;
		*) echo "setpython: no python binary" >&2; exit 1;;
	esac
else
	echo "setpython: unrecognized python version" >&2
	exit 1
fi

exit 0
