set relax
set interactive
set quiet
# There's a --nobranch embedded in the test load so it can be checked standalone.
# This invocation would make the load work even without that.
read --nobranch <split-dir.svn
:2 split by bar
reposurgeon: selection doesn't point at a commit
# Expect the split on zed to fail
:5 split by zed
reposurgeon: couldn't find 'zed' in a fileop path
:5 split by f
reposurgeon: new commits are events 6 and 7.
inspect
Event 1 =================================================================
#reposurgeon sourcetype svn
Event 2 =================================================================
blob
mark :1
data 210
# A simulation of Subversion default ignores, generated by reposurgeon.
*.o
*.lo
*.la
*.al
*.libs
*.so
*.so.[0-9]*
*.a
*.pyc
*.pyo
*.rej
*~
*.#*
.*.swp
.DS_store
# Simulated Subversion default ignores end here

Event 3 =================================================================
blob
mark :2
data 2
a

Event 4 =================================================================
commit refs/heads/master
#legacy-id 2
mark :3
committer brooksd <brooksd> 1353813663 +0000
data 33
add a new file in each directory
M 100644 :1 bar/.gitignore
M 100644 :2 bar/src
M 100644 :1 baz/.gitignore
M 100644 :2 baz/src
M 100644 :1 foo/.gitignore
M 100644 :2 foo/src

Event 5 =================================================================
blob
mark :4
data 4
a
b

Event 6 =================================================================
commit refs/heads/master
#legacy-id 3
mark :5
committer brooksd <brooksd> 1353813665 +0000
data 34
modify the file in each directory
from :3
M 100644 :4 bar/src
M 100644 :4 baz/src

Event 7 =================================================================
commit refs/heads/master
#legacy-id 3.split
mark :7
committer brooksd <brooksd> 1353813665 +0000
data 34
modify the file in each directory
from :5
M 100644 :4 foo/src

Event 8 =================================================================
commit refs/heads/master
#legacy-id 4
mark :6
committer brooksd <brooksd> 1353813667 +0000
data 27
copy the three directories
from :7
M 100644 :4 bar2/src
M 100644 :4 baz2/src
M 100644 :4 foo2/src

